Bitcoin Exchange (CPP Module 09)
Program oblicza wartoÅ›Ä‡ Bitcoina na podstawie historycznych kursÃ³w zapisanych w pliku CSV.
Dla kaÅ¼dej linii wejÅ›cia w formacie date | value wyszukuje kurs z danej daty lub â€“ jeÅ›li nie istnieje â€“ z najbliÅ¼szej wczeÅ›niejszej daty.
Dane sÄ… walidowane, a bÅ‚Ä™dy wypisywane zgodnie z wymaganiami projektu.
Do przechowywania kursÃ³w uÅ¼ywany jest kontener STL (std::map).


1. Argumenty programu
 SprawdÅº argc
 JeÅ›li argc != 2 â†’
Error: could not open file.
 SprÃ³buj otworzyÄ‡ plik wejÅ›ciowy
 JeÅ›li open() siÄ™ nie uda â†’
Error: could not open file.
2. Wczytanie bazy BTC (CSV)
Plik: data.csv
Format:
date,exchange_rate
2011-01-03,0.3

Do zrobienia:
 OtworzyÄ‡ plik CSV
 PominÄ…Ä‡ pierwszÄ… liniÄ™ (nagÅ‚Ã³wek)
 Dla kaÅ¼dej linii:
 rozdzieliÄ‡ po ,
 date â†’ std::string
 rate â†’ double
 zapisaÄ‡ do std::map<string, double>
â— Nie musisz walidowaÄ‡ CSV mocno â€” to dane z subjecta.

3. Wczytanie pliku input (argument)
Plik uÅ¼ytkownika, np. input.txt
Format:
date | value

Do zrobienia:
 OtworzyÄ‡ plik
 PominÄ…Ä‡ pierwszÄ… liniÄ™ (date | value)
 CzytaÄ‡ linia po linii

 Dla kaÅ¼dej linii:
 sprawdziÄ‡ czy zawiera " | "

 podzieliÄ‡ na:
date
value

4. Walidacja daty (BARDZO WAÅ»NE)
Dla kaÅ¼dej linii inputu:
Format:
YYYY-MM-DD

SprawdÅº:
 dÅ‚ugoÅ›Ä‡ == 10
 - na pozycjach [4] i [7]
 rok / miesiÄ…c / dzieÅ„ â†’ tylko cyfry
 miesiÄ…c: 1â€“12
 dzieÅ„: 1â€“31
 (opcjonalnie) dni miesiÄ…ca / luty
JeÅ›li bÅ‚Ä…d:
Error: bad input => <linia>

5. Walidacja value
value = liczba po |
SprawdÅº:
 da siÄ™ skonwertowaÄ‡ (strtod / std::stod)
 value >= 0
 value <= 1000
 brak overflow

BÅ‚Ä™dy:
value < 0 â†’
Error: not a positive number.
value > 1000 â†’
Error: too large a number.

6. Szukanie kursu BTC (logika mapy)
JeÅ›li data istnieje:
 map.find(date)
JeÅ›li NIE istnieje:
 it = map.lower_bound(date)
 jeÅ›li it == map.begin() â†’ brak wczeÅ›niejszej daty â†’ bÅ‚Ä…d

 w przeciwnym razie --it
 uÅ¼yj tej daty
â— Zawsze bierz wczeÅ›niejszÄ…, nigdy pÃ³ÅºniejszÄ…

7. Obliczenie wyniku
 result = value * rate
 wypisaÄ‡:
YYYY-MM-DD => value = result

8. ObsÅ‚uga bÅ‚Ä™dÃ³w â€“ NIE przerywaj programu
 KaÅ¼da linia inputu jest niezaleÅ¼na
 BÅ‚Ä…d w jednej linii â†’ wypisz error
 PrzejdÅº do nastÄ™pnej linii

9. Czego NIE robiÄ‡
âŒ nie uÅ¼ywaj drugiego kontenera
âŒ nie sortuj rÄ™cznie
âŒ nie przerywaj programu przy jednym bÅ‚Ä™dzie
âŒ nie uÅ¼ywaj C++17/20 ficzerÃ³w (trzymaj siÄ™ klasyki)
ğŸ”¢ Value
float lub int
0 â‰¤ value â‰¤ 1000

BÅ‚Ä™dy:
value < 0 â†’
Error: not a positive number.
value > 1000 â†’
Error: too large a number.
| Sytuacja     | Komunikat                       |
| ------------ | ------------------------------- |
| brak pliku   | `Error: could not open file.`   |
| zÅ‚a linia    | `Error: bad input => ...`       |
| value < 0    | `Error: not a positive number.` |
| value > 1000 | `Error: too large a number.`    |
ğŸ‘‰ Program NIE PRZERYWA â€“ leci dalej
ğŸ“¦ Kontenery STL

MUSISZ uÅ¼yÄ‡ co najmniej jednego
np. std::map
po tym zadaniu nie wolno juÅ¼ go uÅ¼yÄ‡

10. Testy koÅ„cowe (obowiÄ…zkowe)
 brak argumentu
 pusty plik
 zÅ‚a data
 -1
 1001
 bardzo duÅ¼a liczba
 data wczeÅ›niejsza niÅ¼ w CSV
 data pomiÄ™dzy dwiema datami w CSV


 2ï¸âƒ£ Co MUSI istnieÄ‡ w programie (na poziomie idei)

Masz jednÄ… gÅ‚Ã³wnÄ… klasÄ™, ktÃ³ra:
trzyma kursy BTC
wczytuje dane
przetwarza input

Ta klasa:
ma mapÄ™: data â†’ kurs BTC
ma metody, ktÃ³re:
wczytujÄ… bazÄ™ CSV
czytajÄ… plik wejÅ›ciowy
sprawdzajÄ… poprawnoÅ›Ä‡ danych
szukajÄ… odpowiedniego kursu
liczÄ… wynik


3ï¸âƒ£ Pierwszy realny krok: BAZA DANYCH (CSV)
Dlaczego od tego?
Bo:
bez kursÃ³w BTC nic nie policzysz
to najprostsza czÄ™Å›Ä‡
daje Ci dziaÅ‚ajÄ…cÄ… mapÄ™

Na tym etapie:
wczytujesz CSV
zapisujesz daty i kursy
nie walidujesz (dane sÄ… poprawne)

Cel etapu:
â€Mam mapÄ™ z kursami i wiem, Å¼e dziaÅ‚aâ€

Drugi krok: CZYTANIE INPUTU (bez walidacji)
Teraz:
otwierasz plik wejÅ›ciowy
czytasz linia po linii
pomijasz nagÅ‚Ã³wek

Na razie:
tylko rozdzielasz liniÄ™ na â€dataâ€ i â€valueâ€
wypisujesz je testowo albo sprawdzasz, czy dobrze siÄ™ dzielÄ…

Cel etapu:
â€Program poprawnie czyta kaÅ¼dÄ… liniÄ™ inputuâ€


5ï¸âƒ£ Dopiero TERAZ: WALIDACJA
To jest trzeci etap, nie pierwszy.

Walidacja daty
Sprawdzasz:
format (YYYY-MM-DD)
czy sÄ… cyfry
czy miesiÄ…c i dzieÅ„ majÄ… sens

JeÅ›li data jest zÅ‚a:
wypisujesz bÅ‚Ä…d
przechodzisz do nastÄ™pnej linii

Walidacja value
Sprawdzasz:
czy to liczba
czy â‰¥ 0
czy â‰¤ 1000

BÅ‚Ä™dy:
liczba ujemna â†’ â€not a positive numberâ€
za duÅ¼a â†’ â€too large a numberâ€

ZnÃ³w:
brak return
tylko przejÅ›cie dalej

6ï¸âƒ£ Szukanie kursu BTC (najwaÅ¼niejsza logika)

Dla poprawnej daty:
sprawdzasz, czy jest dokÅ‚adnie w bazie

jeÅ›li nie:
szukasz najbliÅ¼szej wczeÅ›niejszej daty
nigdy pÃ³Åºniejszej

JeÅ›li nie ma wczeÅ›niejszej daty:
to teÅ¼ jest bÅ‚Ä…d

Cel:
â€Zawsze mam wÅ‚aÅ›ciwy kurs albo wiem, Å¼e nie mogÄ™ go mieÄ‡â€

7ï¸âƒ£ Obliczenie i wypisanie wyniku
Dopiero gdy:
data jest OK
value jest OK
kurs zostaÅ‚ znaleziony

Wtedy:
liczysz wynik
wypisujesz go dokÅ‚adnie w formacie z subjecta

8ï¸âƒ£ Jak MA siÄ™ zachowywaÄ‡ program (to jest kluczowe)

âœ”ï¸ Jedna linia = jedna prÃ³ba
âœ”ï¸ BÅ‚Ä…d â‰  koniec programu
âœ”ï¸ KaÅ¼dy bÅ‚Ä…d â†’ komunikat + dalej
âœ”ï¸ Program koÅ„czy siÄ™ dopiero po caÅ‚ym pliku

To bÄ™dzie sprawdzane na korekcie.

9ï¸âƒ£ Zalecana kolejnoÅ›Ä‡ pracy (praktyczna)

struktura klasy
wczytanie CSV
czytanie inputu
walidacja daty
walidacja value
wyszukiwanie kursu
liczenie wyniku
testy i edge-caseâ€™y

Program przetwarza plik wejÅ›ciowy linia po linii.
KaÅ¼da linia jest niezaleÅ¼na.
W przypadku bÅ‚Ä™du (zÅ‚a data, zÅ‚a wartoÅ›Ä‡, overflow) program wypisuje odpowiedni komunikat, ale nie przerywa dziaÅ‚ania i przechodzi do nastÄ™pnej linii.
Wyniki i bÅ‚Ä™dy sÄ… wypisywane w kolejnoÅ›ci wystÄ™powania w pliku wejÅ›ciowym.